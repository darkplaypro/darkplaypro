<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dark Player Pro Max - Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-dark: #000000;
            --accent-green: #2ecc71;
            --dark-blue: #007bff;
            --player-white: #ffffff;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Arial Black', sans-serif;
            margin: 0; padding: 0;
            width: 100vw; overflow-x: hidden;
        }

        /* --- LOGO --- */
        .logo-anim {
            font-family: 'Arial Black', Gadget, sans-serif;
            font-size: 12vw;
            font-weight: 900;
            text-transform: uppercase;
            text-align: center;
            line-height: 1.1;
            cursor: pointer;
        }
        
        .blue { color: var(--dark-blue); -webkit-text-stroke: 1px var(--dark-blue); }
        .white { color: var(--player-white); -webkit-text-stroke: 1px var(--player-white); }

        /* --- INTRO ANIMACIÓN --- */
        #intro-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: layerFadeOut 0.8s forwards 3s;
            pointer-events: none;
        }
        
        @keyframes logoEntryPoint {
            0% { opacity: 0; transform: scale(0.7); filter: blur(10px); }
            100% { opacity: 1; transform: scale(1); filter: blur(0); }
        }
        .intro-logo { animation: logoEntryPoint 1.5s ease-out forwards; }
        @keyframes layerFadeOut { to { opacity: 0; visibility: hidden; } }

        /* --- CABECERA --- */
        .header {
            position: fixed;
            top: 0; width: 100%;
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 20px 0;
            background: linear-gradient(to bottom, rgba(0,0,0,1) 60%, transparent);
            z-index: 1000;
        }

        .nav-item {
            cursor: pointer;
            font-size: 16px;
            font-weight: 900;
            color: #666;
            text-transform: uppercase;
            padding-bottom: 5px;
            border-bottom: 3px solid transparent;
        }

        .nav-item.active {
            color: white;
            border-bottom: 3px solid var(--accent-green);
        }

        /* --- HERO --- */
        .hero-centered {
            height: 85vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, rgba(0,123,255,0.15) 0%, rgba(0,0,0,1) 80%);
            text-align: center;
        }

        /* --- CARRUSELES PRINCIPALES --- */
        .section-container { width: 100%; padding: 20px 0; }
        .row-title {   
            font-size: 22px;   
            margin: 0 15px 15px 15px;   
            display: flex;   
            justify-content: space-between;   
            align-items: center;   
            font-weight: 900;
        }
        
        .ver-todo { color: var(--accent-green); font-size: 12px; cursor: pointer; text-transform: uppercase; }

        .carousel {  
            display: flex;   
            overflow-x: auto;   
            gap: 12px;  
            padding: 0 15px 15px 15px;  
            scrollbar-width: none;  
        }  
        .carousel::-webkit-scrollbar { display: none; }  

        .card {  
            min-width: 135px; height: 200px;  
            background: #111; border-radius: 8px;  
            display: flex; flex-direction: column;  
            justify-content: center; align-items: center;  
            border: 1px solid #222;
            flex-shrink: 0;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            position: relative;
        }  

        .card-logo { font-size: 10px; text-align: center; font-weight: 900; }
        .card-title-overlay {
            position: absolute; bottom: 0; width: 100%; 
            background: rgba(0,0,0,0.7); font-size: 10px; 
            padding: 5px; text-align: center; font-weight: bold;
        }

        /* --- PANEL ADMIN --- */
        #admin-panel {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 11000; display: none; flex-direction: column; padding: 20px;
            overflow-y: auto;
        }
        .admin-input {
            width: 100%; padding: 12px; margin: 10px 0;
            background: #222; border: 1px solid var(--dark-blue); color: white; border-radius: 5px; font-family: sans-serif;
        }
        .admin-btn {
            background: var(--accent-green); color: black; padding: 15px;
            border: none; font-weight: bold; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 10px;
        }

        /* --- VISTAS --- */
        #category-view, #player-view {
            position: fixed; inset: 0; background: black; z-index: 5000;
            display: none; flex-direction: column; overflow-y: auto;
        }
        
        .grid-full {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 8px; margin-top: 60px; padding: 10px 10px 100px 10px;
        }

        iframe { flex: 1; border: none; background: #000; }
        .back-nav { padding: 15px; background: #000; color: var(--accent-green); font-weight: 900; cursor: pointer; border: none; text-align: left; }
        .back-btn {
            position: fixed; bottom: 30px; right: 25px; 
            background: var(--accent-green); color: black; 
            width: 55px; height: 55px; border-radius: 50%; 
            display: flex; justify-content: center; align-items: center;
            font-size: 20px; z-index: 6000; border: none;
        }
    </style>
</head>
<body>

<div id="intro-layer">
    <div class="logo-anim intro-logo">
        <span class="blue">DARK</span><br><span class="white">PLAYER</span>
    </div>
</div>

<div id="main-content">
    <div class="header">
        <div id="nav-movies" class="nav-item active" onclick="changeTab('movies')">Películas</div>
        <div id="nav-series" class="nav-item" onclick="changeTab('series')">Series</div>
    </div>

    <div class="hero-centered">
        <div class="logo-anim" style="font-size: 18vw;" ondblclick="toggleAdmin()">
            <span class="blue">DARK</span><br><span class="white">PLAYER</span>
        </div>
        <p style="color: var(--accent-green); letter-spacing: 4px; font-size: 11px; margin-top: 15px; font-weight: 900;">PREMIUM STREAMING</p>
    </div>

    <div id="catalogo"></div>
</div>

<div id="admin-panel">
    <h2 style="color: var(--dark-blue)">PANEL DE ADMINISTRACIÓN</h2>
    <input type="text" id="adm-title" class="admin-input" placeholder="Título">
    <input type="text" id="adm-img" class="admin-input" placeholder="URL Imagen Portada">
    <input type="text" id="adm-link" class="admin-input" placeholder="URL Video (Embed)">
    <select id="adm-cat" class="admin-input">
        <optgroup label="Películas">
            <option value="ACCIÓN">ACCIÓN</option>
            <option value="INFANTIL">INFANTIL</option>
            <option value="DRAMA">DRAMA</option>
            <option value="COMEDIA">COMEDIA</option>
            <option value="TERROR">TERROR</option>
        </optgroup>
        <optgroup label="Series">
            <option value="SERIES POPULARES">SERIES POPULARES</option>
            <option value="ANIMACIÓN">ANIMACIÓN</option>
        </optgroup>
    </select>
    <button class="admin-btn" onclick="saveContent()">AÑADIR CONTENIDO</button>
    <button class="admin-btn" style="background:#555" onclick="toggleAdmin()">CERRAR</button>
    <div id="admin-list" style="margin-top:20px; border-top:1px solid #333; padding-top:10px;"></div>
</div>

<div id="category-view">
    <h2 id="cat-title" style="margin: 80px 0 20px 20px; font-size: 22px; text-transform: uppercase; border-left: 4px solid var(--dark-blue); padding-left: 10px;"></h2>
    <div class="grid-full" id="grid-full"></div>
    <button class="back-btn" onclick="closeCategory()"><i class="fa-solid fa-arrow-left"></i></button>
</div>

<div id="player-view">
    <button class="back-nav" onclick="closePlayer()"><i class="fa-solid fa-arrow-left"></i> VOLVER AL MENÚ</button>
    <iframe id="video-frame" allow="autoplay; fullscreen" allowfullscreen></iframe>
</div>

<script>
    // Base de datos local
    let db = JSON.parse(localStorage.getItem('darkPlayerDB')) || [];

    const movieCategories = ["ACCIÓN", "INFANTIL", "DRAMA", "COMEDIA", "ARTES MARCIALES", "TERROR", "CIENCIA FICCIÓN", "SUSPENSO"];
    const seriesCategories = ["SERIES POPULARES", "ANIMACIÓN", "DRAMA TV", "DOCUMENTALES"];

    function toggleAdmin() {
        const p = document.getElementById('admin-panel');
        p.style.display = p.style.display === 'flex' ? 'none' : 'flex';
        renderAdminList();
    }

    function saveContent() {
        const item = {
            id: Date.now(),
            title: document.getElementById('adm-title').value,
            img: document.getElementById('adm-img').value,
            link: document.getElementById('adm-link').value,
            cat: document.getElementById('adm-cat').value
        };
        if(!item.title || !item.link) return alert("Faltan datos");
        db.push(item);
        localStorage.setItem('darkPlayerDB', JSON.stringify(db));
        alert("Contenido Agregado");
        location.reload();
    }

    function deleteItem(id) {
        db = db.filter(i => i.id !== id);
        localStorage.setItem('darkPlayerDB', JSON.stringify(db));
        renderAdminList();
        renderCatalogo(movieCategories);
    }

    function renderAdminList() {
        const list = document.getElementById('admin-list');
        list.innerHTML = '<h3>Gestionar Contenido:</h3>';
        db.forEach(i => {
            list.innerHTML += `<div style="background:#222; margin-bottom:5px; padding:10px; display:flex; justify-content:space-between; align-items:center;">
                <span>${i.title} (${i.cat})</span>
                <button onclick="deleteItem(${i.id})" style="color:red; background:none; border:none;">ELIMINAR</button>
            </div>`;
        });
    }

    function changeTab(type) {
        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
        if(type === 'movies') {
            document.getElementById('nav-movies').classList.add('active');
            renderCatalogo(movieCategories);
        } else {
            document.getElementById('nav-series').classList.add('active');
            renderCatalogo(seriesCategories);
        }
    }

    function renderCatalogo(list) {
        const catalogo = document.getElementById('catalogo');
        catalogo.innerHTML = ''; 
        list.forEach(cat => {
            const wrap = document.createElement('div');
            wrap.className = 'section-container';
            wrap.innerHTML = `<div class="row-title"><span>${cat}</span><span class="ver-todo" onclick="openCategory('${cat}')">VER TODO +</span></div>`;
            
            const filteredContent = db.filter(i => i.cat === cat);

            for(let r=1; r<=4; r++) {
                const car = document.createElement('div');
                car.className = 'carousel';
                
                // Si hay contenido real, lo ponemos en la primera fila, el resto rellena con logos
                if(r === 1 && filteredContent.length > 0) {
                    filteredContent.forEach(item => {
                        car.appendChild(createCard(item));
                    });
                } else {
                    // Relleno de seguridad (20 tarjetas por carrusel como el original)
                    for(let i=1; i<=20; i++) {
                        car.appendChild(createPlaceholderCard());
                    }
                }
                wrap.appendChild(car);
            }
            catalogo.appendChild(wrap);
        });
    }

    function createCard(item) {
        const card = document.createElement('div');
        card.className = 'card';
        card.style.backgroundImage = `url(${item.img})`;
        card.onclick = () => openPlayer(item.link);
        if(!item.img) card.innerHTML = `<div class="card-logo"><span class="blue">DARK</span><br><span class="white">PLAYER</span></div>`;
        card.innerHTML += `<div class="card-title-overlay">${item.title}</div>`;
        return card;
    }

    function createPlaceholderCard() {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<div class="card-logo"><span class="blue">DARK</span><br><span class="white">PLAYER</span></div>`;
        return card;
    }

    function openCategory(name) {
        document.getElementById('main-content').style.display = 'none';
        const view = document.getElementById('category-view');
        const grid = document.getElementById('grid-full');
        document.getElementById('cat-title').innerText = name;
        grid.innerHTML = ''; 
        view.style.display = 'flex';
        
        const content = db.filter(i => i.cat === name);
        content.forEach(item => grid.appendChild(createCard(item)));
        
        // Rellenar hasta 200 si quieres mantener la estética
        for(let i=content.length; i<40; i++) {
            grid.appendChild(createPlaceholderCard());
        }
    }

    function openPlayer(link) {
        document.getElementById('video-frame').src = link; 
        document.getElementById('player-view').style.display = 'flex';
    }

    function closePlayer() {
        document.getElementById('video-frame').src = "";
        document.getElementById('player-view').style.display = 'none';
    }

    function closeCategory() {
        document.getElementById('category-view').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
    }

    renderCatalogo(movieCategories);
</script>

</body>
</html>

